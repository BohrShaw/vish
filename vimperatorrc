" Vimperator customization file

let mapleader = ","

cd ~

set wildmode=list:longest,full
set hintchars=asdfghjklweruio
color indigo
" set defsearch=bing

" Mappings" {{{
no ; :
no \\ ;
nno gj gt
nno J gt
nno gk gT
nno K gT
nno <leader>/ :set invhlsearch
cno <c-p> <Up>
cno <c-n> <Down>
cno <c-f> <esc><c-f>
cno xood open https://kuaipan.cn/home.htm, vdisk.weibo.com, dbank.com, 115.com
" }}}

" Abbreviations" {{{
ca his hist -m 10
ia boh bohrshaw
ia bog bohrshaw@gmail.com
ia boq bohrshaw@qq.com
ia ast astenboer
" }}}

" automatic pass-through mode on certain pages
"autocmd LocationChange .* :js modes.passAllKeys = /mail\.google\.com/.test(buffer.URL)
"autocmd LocationChange .* :js modes.passAllKeys = /app\.nirvanahq\.com/.test(buffer.URL)

" add new functions which are then available to the :js command
js <<EOF
toggle_element = function (name) {
document.getElementById(name).collapsed ^= 1;
}
EOF
" and now use it in mappings
map <silent> <F9> :js toggle_element('nav-bar')<CR>

" move the RSS icon from the now-hidden location bar to the status bar instead
"javascript <<EOF
"(function(){
"var feedPanel = document.createElement("statusbarpanel");
"feedPanel.setAttribute("id", "feed-panel-clone");
"feedPanel.appendChild(document.getElementById("feed-button"));
"feedPanel.firstChild.setAttribute("style", "padding: 0; max-height: 16px;");
"document.getElementById("status-bar")
".insertBefore(feedPanel, document.getElementById("security-button"));
"})();
"EOF

" define a keyword bookmark
"bmark -keyword=mozjscoreref https://developer.mozilla.org/Special:Search?search=%s&type=fulltext
" ... and a command line abbreviation for the keyword
"ca j mozjscoreref
" now in Vimperator type 't j<Space>' and there you go

" vim: ft=vimperator:fdm=marker:commentstring=\"\ %s
