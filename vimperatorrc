" File: vimperatorrc
" Author: Bohr Shaw(pubohr@gmail.com)
" Description: vimperator configuration.

" Firefox options {{{1
" Always open a link in the current tab
" au VimperatorEnter .* set! browser.link.open_newwindow=1
" set! browser.link.open_newwindow.restriction=0

" Options {{{1
" A unified runtime path
set rtp=~/vimperator,~/.vimperator
" Replace <Leader> in a map
" let mapleader = ','
" Being in normal mode when opening any page
" set focuscontent
" Defines how command-line completion works
set noautocomplete wildmode=list:longest,full
" Characters to generate hint labels (case-sensitive)
set hintchars=asdfghjklweruio
" The default search engine to use
" set defsearch=google
" The title of the browser window
set titlestring=Firefox
" The editor to open when pressing <C-I> in insert mode
set editor='gvim -f --cmd "let l=1"'

" Change the current directory to $HOME
silent cd ~

" Set the color scheme
color indigo

" Mappings {{{1
noremap @; @:
" Active the search box
noremap <c-e> i<c-e>
" Yank the URL of a link
nnoremap e ;y

" Go to {count} tab pages forward or back
nnoremap l <c-n>
nnoremap h gT
" Move a tab around
nnoremap J :tabm +1<cr>
nnoremap K :tabm -1<cr>
" Delete the current tab
nnoremap x d
" Delete the left tab
nnoremap X gTd

" Toggle tool bars
nnoremap sm :set gui=invmenu<cr>
nnoremap st :set gui=invtabs<cr>
nnoremap sn :set gui=invnavigation<cr>
nnoremap sb :set gui=invbookmarks<cr>
nnoremap sa :set gui=invaddons<cr>

" Toggle options
nnoremap soh :set hlsearch!<cr>
nnoremap sol :set linksearch!<cr>
nnoremap son :set tabnumbers!<cr>
nnoremap sou :set usermode!<cr>

" Source files
nnoremap <leader>sv :source ~/.vim/vimperatorrc<cr>
nnoremap <leader>sp :source ~/.vim/vimperator/persisted.vimp<cr>

" Mappings! {{{1
" Recall older or more recent commands matching the current command line
cnoremap <C-P> <Up>
cnoremap <C-N> <Down>

" Move the cursor around one word
" inoremap <A-f> <C-Right>
cnoremap <A-f> <C-Right>
" inoremap <A-b> <C-Left>
cnoremap <A-b> <C-Left>

" Move the cursor around one character
" inoremap <C-F> <Right>
cnoremap <C-F> <Right>
" inoremap <C-B> <Left>
cnoremap <C-B> <Left>

" Delete one word after the cursor
" inoremap <A-d> <C-Del>
cnoremap <A-d> <C-Del>

" Abbreviations {{{1
ca tm tabm

ca his hist -m 10

ca pos powershell

ia boh bohrshaw
ia bog bohrshaw@gmail.com
ia boo bohrshaw@outlook.com
ia boq bohrshaw@qq.com
ia ast astenboer

" Helpers {{{1
" Open a help page in a new tab
command! -nargs=? -complete=help H tab h <args>

" Open the download window in a new tab
command! Dl tab dl

" Open about:config
command! config open about:config

" Get words definition from google
command! -nargs + define open https://www.google.com.hk/search?q=define+<args>

" Close the find bar
noremap <c-s-f> :js getBrowser().getFindBar().close()<cr>
inoremap <c-s-f> <esc><esc>:js getBrowser().getFindBar().close()<cr>

" Open epub catalog
noremap <leader>oe :tabopen chrome://epubreader/content/catalog.xul<cr>

" Open the QQ cloud input method
command! OpenInputMethod open javascript:(function(q){q?q.toggle():function(d,j){j=d.createElement('script');j.async=true;j.src='//ime.qq.com/fcgi-bin/getjs';j.setAttribute('ime-cfg','lt=2&im=122');d=d.getElementsByTagName('head')[0];d.insertBefore(j,d.firstChild)}(document)})(window.QQWebIME)
noremap <c-s-space> :OpenInputMethod<cr>
inoremap <c-s-space> <esc>:OpenInputMethod<cr>gi

" vim:ft=vimperator fdm=marker commentstring="\ %s tw=80:
