#!/usr/bin/env bash

# Install bundle dependencies

sd() {
  dir="$HOME/.vim/bundle/$1"
  [ -d "$dir" ] && cd "$dir"
}

if sd vim-go; then
  if [[ -e "$GOPATH"/src/golang.org/x/tools/.git ]]; then
    git pull
  else
    git clone --depth 1 git://github.com/golang/tools.git "$GOPATH"/src/golang.org/x/tools
  fi

  # Manually install these binary as golang.org could be unreachable
  go install golang.org/x/tools/cmd/{goimports,oracle,gorename}

  [[ -n $TMUX ]] && vim='tmux new-window -d vim' || vim=gvim
  $vim -c 'execute "GoInstallBinaries"|qall!' &
fi

if sd go-explorer/src/getool; then
  go install
fi
